{% from "components/button.njk" import redcrossButton %}
{% from "components/progression.njk" import redcrossProgression %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% extends "_layout.html" %}

{% block content %}

<div class="govuk-width-container">
  <main class="govuk-main-wrapper">

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {{ redcrossProgression({ active: "3"}) }}
      </div>
    </div>

    <!--<div class="govuk-grid-row">
      <div class="govuk-grid-column-full">

        {{ govukBackLink({
          text: "Back",
          href: "/check-eligibility",
          classes: "redcross-back-link"
        }) }}
      </div>
    </div>-->

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">

        <div class="redcross-content__box">
          <h1 class="govuk-heading-xl">Submit an enquiry</h1>

          <form method="POST"  novalidate>

            {{ govukInput({
              label: {
                text: "First name",
                classes: "govuk-label--m"
              },
              id: "first-name",
              name: "first-name",
              value: body["first-name"],
              errorMessage: errors["first-name"]
            }) }}

            {{ govukInput({
              label: {
                text: "Last name",
                classes: "govuk-label--m"
              },
              id: "last-name",
              name: "last-name",
              value: body["last-name"],
              errorMessage: errors["last-name"]
            }) }}

            {{ govukInput({
              label: {
                text: "Email",
                classes: "govuk-label--m"
              },
              id: "email",
              name: "email",
              value: body["email"],
              errorMessage: errors["email"]
            }) }}

            {{ govukInput({
              label: {
                text: "Phone",
                classes: "govuk-label--m"
              },
              id: "phone",
              name: "phone",
              value: body["phone"],
              errorMessage: errors["phone"]
            }) }}

            {{ govukRadios({
              idPrefix: "how-should-we-contact-you",
              name: "how-should-we-contact-you",
              errorMessage: errors["how-should-we-contact-you"],
              fieldset: {
                legend: {
                  text: "How should we contact you?",
                  classes: "govuk-fieldset__legend--m"
                }
              },
              items: [
                {
                  value: "Email",
                  text: "Email",
                  checked: (true if body["how-should-we-contact-you"] === "Email" else false)
                },
                {
                  value: "Phone",
                  text: "Phone",
                  checked: (true if body["how-should-we-contact-you"] === "Phone" else false)
                },
                {
                  value: "Text message",
                  text: "Text message",
                  checked: (true if body["how-should-we-contact-you"] === "Text message" else false)
                }
              ]
            }) }}

            {{ govukInput({
              label: {
                text: "Postcode",
                classes: "govuk-label--m"
              },
              id: "postcode",
              name: "postcode",
              value: body["postcode"],
              errorMessage: errors["postcode"],
              hint: {
                text: "(so we can find your local service)"
              }
            }) }}

            {{ govukInput({
              label: {
                text: "If you will need an interpreter, please enter your primary language",
                classes: "govuk-label--m"
              },
              id: "interpreter-needed-primary-language",
              name: "interpreter-needed-primary-language",
              value: body["interpreter-needed-primary-language"]
            }) }}

            <p class="govuk-heading-m">If you have been referred to family tracing by someone else, please enter the following:</p>

            {{ govukRadios({
              id: "referrer-relationship",
              name: "referrer-relationship",
              fieldset: {
                legend: {
                  text: "What is their relationship to you?",
                  classes: "govuk-fieldset__legend--s"
                }
              },
              items: [
                {
                  value: "Legal professional or advisor",
                  text: "Legal professional or advisor",
                  checked: (true if body["referrer-relationship"] === "Legal professional or advisor" else false)
                },
                {
                  value: "Social worker",
                  text: "Social worker",
                  checked: (true if body["referrer-relationship"] === "Social worker" else false)
                },
                {
                  value: "Friend or family",
                  text: "Friend or family",
                  checked: (true if body["referrer-relationship"] === "Friend or family" else false)
                },
                {
                  value: "Other",
                  text: "Other",
                  checked: (true if body["referrer-relationship"] === "Other" else false)
                }
              ]
            }) }}

            {{ govukInput({
              label: {
                text: "Referrer's email address",
                classes: "govuk-label--m"
              },
              id: "referrers-email-address",
              name: "referrers-email-address",
              value: body["referrers-email-address"]
            }) }}

            {{ redcrossButton({
              text: "Submit Enquiry",
              attributes: { id: "submit-enquiry-button" }
            }) }}
          </form>
        </div>
      </div>
    </div>

  </main>
</div>

{% endblock %}}
